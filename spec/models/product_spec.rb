require 'spec_helper'

def amazon_item_xml
  Nokogiri::XML(<<-EOS)
<Item>\n  <ASIN>B000B8PP8S</ASIN>\n  <DetailPageURL>http://www.amazon.co.jp/EPI-%E3%82%A4%E3%83%BC%E3%83%94%E3%83%BC%E3%82%A2%E3%82%A4-C-5201-EPI%E3%82%A2%E3%83%AB%E3%83%9F3%E7%82%B9%E9%A3%9F%E5%99%A8%E3%82%BB%E3%83%83%E3%83%88/dp/B000B8PP8S%3FSubscriptionId%3DAKIAJPQEWR6DKZ6L4HIQ%26tag%3Dyamadb-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB000B8PP8S</DetailPageURL>\n  <SmallImage>\n    <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL75_.jpg</URL>\n    <Height Units=\"pixels\">61</Height>\n    <Width Units=\"pixels\">75</Width>\n  </SmallImage>\n  <MediumImage>\n    <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL160_.jpg</URL>\n    <Height Units=\"pixels\">130</Height>\n    <Width Units=\"pixels\">160</Width>\n  </MediumImage>\n  <LargeImage>\n    <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL.jpg</URL>\n    <Height Units=\"pixels\">247</Height>\n    <Width Units=\"pixels\">304</Width>\n  </LargeImage>\n  <ImageSets>\n    <ImageSet Category=\"primary\">\n      <SwatchImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL30_.jpg</URL>\n        <Height Units=\"pixels\">24</Height>\n        <Width Units=\"pixels\">30</Width>\n      </SwatchImage>\n      <SmallImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL75_.jpg</URL>\n        <Height Units=\"pixels\">61</Height>\n        <Width Units=\"pixels\">75</Width>\n      </SmallImage>\n      <MediumImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL160_.jpg</URL>\n        <Height Units=\"pixels\">130</Height>\n        <Width Units=\"pixels\">160</Width>\n      </MediumImage>\n      <LargeImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL.jpg</URL>\n        <Height Units=\"pixels\">247</Height>\n        <Width Units=\"pixels\">304</Width>\n      </LargeImage>\n    </ImageSet>\n    <ImageSet Category=\"swatch\">\n      <SwatchImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL30_.jpg</URL>\n        <Height Units=\"pixels\">24</Height>\n        <Width Units=\"pixels\">30</Width>\n      </SwatchImage>\n      <SmallImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL75_.jpg</URL>\n        <Height Units=\"pixels\">61</Height>\n        <Width Units=\"pixels\">75</Width>\n      </SmallImage>\n      <MediumImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL._SL160_.jpg</URL>\n        <Height Units=\"pixels\">130</Height>\n        <Width Units=\"pixels\">160</Width>\n      </MediumImage>\n      <LargeImage>\n        <URL>http://ecx.images-amazon.com/images/I/31143DRSWYL.jpg</URL>\n        <Height Units=\"pixels\">247</Height>\n        <Width Units=\"pixels\">304</Width>\n      </LargeImage>\n    </ImageSet>\n  </ImageSets>\n  <ItemAttributes>\n    <Binding>&#x30B9;&#x30DD;&#x30FC;&#x30C4;&#x7528;&#x54C1;</Binding>\n    <Brand>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;)</Brand>\n    <EAN>4945244111975</EAN>\n    <Label>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;)</Label>\n    <ListPrice>\n      <Amount>1050</Amount>\n      <CurrencyCode>JPY</CurrencyCode>\n      <FormattedPrice>&#xFFE5; 1,050</FormattedPrice>\n    </ListPrice>\n    <Manufacturer>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;)</Manufacturer>\n    <Model>C-5201</Model>\n    <PackageDimensions>\n      <Height Units=\"hundredths-inches\">299</Height>\n      <Length Units=\"hundredths-inches\">543</Length>\n      <Weight Units=\"hundredths-pounds\">53</Weight>\n      <Width Units=\"hundredths-inches\">543</Width>\n    </PackageDimensions>\n    <ProductGroup>Sports</ProductGroup>\n    <Publisher>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;)</Publisher>\n    <Studio>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;)</Studio>\n    <Title>EPI(&#x30A4;&#x30FC;&#x30D4;&#x30FC;&#x30A2;&#x30A4;) EPI&#x30A2;&#x30EB;&#x30DF;3&#x70B9;&#x98DF;&#x5668;&#x30BB;&#x30C3;&#x30C8; C-5201</Title>\n  </ItemAttributes>\n</Item>
EOS
end

describe Product do
  describe 'Product.new_from_amazon_element' do
    it 'can give correct product' do
      element = Amazon::Element.new(amazon_item_xml)
      pp Product.new_from_amazon_element(element)
    end
  end
end
